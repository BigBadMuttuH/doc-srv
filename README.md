# doc-srv — Сервер корпоративной документации

Легковесный HTTP-сервер на Go для организации, хранения и поиска нормативных документов (PDF). Проект оформлен в корпоративном стиле и поставляется в виде единого исполняемого файла.

## Возможности

*   **Структура**: Автоматическое сканирование папки `docs` и подпапок.
*   **Поиск**: Фильтрация документов по названию на лету (JS).
*   **Описания разделов**: Поддержка `README.md` в папках разделов (рендеринг Markdown в HTML).
*   **Производительность**: Кэширование структуры документов в памяти (обновление раз в 5 минут).
*   **Логирование**: Встроенная ротация логов доступа (`access.log`).
*   **Portable**: Все ресурсы (HTML, CSS) вшиты в бинарный файл.

## Установка и запуск

### Локальный запуск (для разработки)

1.  Склонируйте репозиторий.
2.  Запустите:
    ```bash
    go run .
    ```
3.  Откройте браузер: http://localhost:8080

### Сборка и деплой

Для создания исполняемого файла (Windows):

```bash
go build -o doc-srv.exe .
```

Для кросс-компиляции под Windows (если собираете на Linux/macOS):

```bash
GOOS=windows GOARCH=amd64 go build -o doc-srv.exe .
```

**На сервере:**

1.  Скопируйте `doc-srv.exe` на сервер.
2.  Создайте папку `docs` рядом с файлом.
3.  Создайте структуру папок отделов внутри `docs` и наполните их PDF-файлами.
    *   *Опционально*: добавьте `README.md` в папку отдела для красивого описания.
4.  Запустите сервер:
    ```powershell
    .\doc-srv.exe
    ```

### Установка как служба Windows (Service)

Вы можете установить приложение как системную службу, чтобы оно запускалось автоматически при старте Windows.

1.  Запустите командную строку (PowerShell или CMD) **от имени администратора**.
2.  Установите службу:
    ```powershell
    .\doc-srv.exe -service install
    ```
    *При установке служба запомнит текущие параметры запуска (например, `-port` или `-dir`), поэтому если они нужны, укажите их:*
    ```powershell
    .\doc-srv.exe -port 9090 -dir "C:\Docs" -service install
    ```
3.  Запустите службу:
    ```powershell
    .\doc-srv.exe -service start
    ```

Для остановки и удаления:
```powershell
.\doc-srv.exe -service stop
.\doc-srv.exe -service uninstall
```

## Структура папок (пример)

```text
.
├── doc-srv.exe
├── access.log       # Создается автоматически
└── docs/
    ├── Приказ_1.pdf # Попадет в раздел "Общее"
    ├── HR/
    │   ├── instruction.pdf
    │   └── README.md
    └── IT/
        └── network.pdf
```

## Разработка

Проект использует Go 1.25+.

Запуск тестов:
```bash
go test -v
```
