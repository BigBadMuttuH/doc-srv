<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ø—Ä–∞–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="page">
        <header class="hero">
            <div class="hero-badge">–ú—É—Ä–º–∞–Ω—Å–∫–∞—è —Ç–∞–º–æ–∂–Ω—è</div>
            <h1 class="hero-title">–°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h1>
            <p class="hero-subtitle">–§–¢–° –†–æ—Å—Å–∏–∏, –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–Ω–æ–≥–æ —Ç–∞–º–æ–∂–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ú—É—Ä–º–∞–Ω—Å–∫–æ–π —Ç–∞–º–æ–∂–Ω–∏</p>
        </header>

        <div class="main-content">
            <div class="search-block">
                <input type="text" id="searchInput" class="search-input" placeholder="üîç –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞..." onkeyup="filterDocs()">
                <div class="toolbar">
                    <button type="button" class="toolbar-button" onclick="expandAll()">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ</button>
                    <button type="button" class="toolbar-button" onclick="collapseAll()">–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ</button>
                </div>
            </div>

            <div class="sections">
            {{range .}}
                <details>
                    <summary><h2>{{.Name}} ({{len .Documents}})</h2></summary>

                    {{if .Readme}}
                    <div class="readme">{{.Readme}}</div>
                    {{end}}

                    <ul>
                        {{range .Documents}}
                        <li><a href="{{.URL}}" target="_blank">üìÑ {{.Name}}</a></li>
                        {{end}}
                    </ul>
                </details>
            {{else}}
                <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.</p>
            {{end}}
            </div>
        </div>

        <footer class="footer">
            <span>¬©–ú—É—Ä–º–∞–Ω—Å–∫–∞ —Ç–∞–º–æ–∂–Ω—è ¬∑ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</span>
            <span>–†–∞–∑–¥–µ–ª–æ–≤: {{len .}}</span>
        </footer>
    </div>

    <script>
        function filterDocs() {
            var input = document.getElementById('searchInput');
            var filter = input.value.toLowerCase();
            var sections = document.getElementsByTagName('details');

            for (var i = 0; i < sections.length; i++) {
                var section = sections[i];
                var items = section.getElementsByTagName('li');
                var readme = section.querySelector('.readme');
                
                // Check if filter matches section name
                var summary = section.querySelector('summary');
                var sectionNameMatch = summary && summary.innerText.toLowerCase().indexOf(filter) > -1;

                // Check if filter matches README content
                var readmeMatch = false;
                if (readme) {
                    var readmeText = readme.innerText || readme.textContent;
                    if (readmeText.toLowerCase().indexOf(filter) > -1) {
                        readmeMatch = true;
                    }
                }

                var hasVisibleItem = false;

                // Filter individual files
                for (var j = 0; j < items.length; j++) {
                    var item = items[j];
                    var text = item.innerText || item.textContent;
                    // If section matches or readme matches, show all items
                    // Otherwise check item name
                    if (sectionNameMatch || readmeMatch || text.toLowerCase().indexOf(filter) > -1) {
                        item.style.display = "";
                        hasVisibleItem = true;
                    } else {
                        item.style.display = "none";
                    }
                }

                // Show section if it has visible items OR if the section/readme itself matched
                // (If section/readme matched, hasVisibleItem is already true because we showed all items)
                if (hasVisibleItem) {
                    section.style.display = "";
                    if (filter.length > 0) {
                        section.open = true;
                    }
                } else {
                    section.style.display = "none";
                }
            }
        }

        function expandAll() {
            var sections = document.getElementsByTagName('details');
            for (var i = 0; i < sections.length; i++) {
                sections[i].open = true;
                sections[i].style.display = "";

                var items = sections[i].getElementsByTagName('li');
                for (var j = 0; j < items.length; j++) {
                    items[j].style.display = "";
                }
            }
        }

        function collapseAll() {
            var sections = document.getElementsByTagName('details');
            for (var i = 0; i < sections.length; i++) {
                sections[i].open = false;
                sections[i].style.display = "";

                var items = sections[i].getElementsByTagName('li');
                for (var j = 0; j < items.length; j++) {
                    items[j].style.display = "";
                }
            }
        }
    </script>
</body>
</html>
